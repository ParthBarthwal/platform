# Migration `20200625162125-replace-json-types-with-strins`

This migration has been generated by Angad Singh at 6/25/2020, 4:21:25 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `cryptocracy`.`Level` DROP COLUMN `level`,
ADD COLUMN `level` varchar(191) NOT NULL  ;

ALTER TABLE `cryptocracy`.`Log` DROP COLUMN `log`,
ADD COLUMN `log` varchar(191) NOT NULL  ;

ALTER TABLE `cryptocracy`.`Riddle` DROP COLUMN `riddle`,
ADD COLUMN `riddle` varchar(191) NOT NULL  ;

ALTER TABLE `cryptocracy`.`Tile` DROP COLUMN `story`,
ADD COLUMN `story` varchar(191)   ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200624195700-init..20200625162125-replace-json-types-with-strins
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "mysql"
-  url = "***"
+  url      = env("MYSQL_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -76,9 +76,9 @@
   levelId Int?
   level   Level? @relation(fields: [levelId], references: [id])
   // Story tile
-  story Json?
+  story String?
   // Mystery tile
   mysteryTileOpen Boolean @default(false)
@@ -105,9 +105,9 @@
 model Level {
   id           Int            @id @default(autoincrement())
   createdAt    DateTime       @default(now())
   updatedAt    DateTime       @updatedAt @default(now())
-  level        Json
+  level        String
   points       Int
   answer       String
   userLvls     UserLevel[]
   tiles        Tile[]
@@ -130,9 +130,9 @@
 model Riddle {
   id            Int             @id @default(autoincrement())
   createdAt     DateTime        @default(now())
   updatedAt     DateTime        @updatedAt @default(now())
-  riddle        Json
+  riddle        String
   answer        String
   points        Int
   completed     UserRiddle[]
   tiles         VisitedTile[]
@@ -182,8 +182,8 @@
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt @default(now())
   userId    Int
   user      User     @relation(fields: [userId], references: [id])
-  log       Json
+  log       String
   adminOnly Boolean  @default(false)
   flagged   Boolean  @default(false)
 }
```


